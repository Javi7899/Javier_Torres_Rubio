<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javier Torres Rubio | Portfolio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <style>
        :root {
            --primary-color: #1a56db;
            --secondary-color: #0c4a6e;
            --accent-color: #7e22ce;
            --dark-color: #1e293b;
            --light-color: #f8fafc;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: rgba(0, 0, 0, 0.1);
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --card-bg: rgba(255, 255, 255, 0.9);
        }

        [data-theme="dark"] {
            --bg-color: #0f172a;
            --text-color: #f8fafc;
            --card-bg: rgba(30, 41, 59, 0.9);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            line-height: 1.6;
        }

        section {
            padding: 5rem 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* Header y Navegación */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            padding: 1.5rem 2rem;
            transition: all 0.3s ease;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        header.scrolled {
            padding: 1rem 2rem;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-color);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo span {
            color: var(--primary-color);
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 2.5rem;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--secondary-color);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--secondary-color);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .language-selector {
            position: relative;
        }

        .language-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card-bg);
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 1000;
        }

        .language-dropdown.show {
            display: block;
        }

        .language-option {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .language-option:hover {
            background: rgba(37, 99, 235, 0.1);
        }

        .download-cv {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .download-cv:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }

        /* Menú Hamburguesa */
        .hamburger {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            cursor: pointer;
            z-index: 1001;
        }

        .hamburger span {
            height: 3px;
            width: 100%;
            background-color: var(--text-color);
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .hamburger.active span:nth-child(1) {
            transform: translateY(9px) rotate(45deg);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: translateY(-9px) rotate(-45deg);
        }

        /* Hero Section - Modificado */
        #hero {
            position: relative;
            padding-top: 8rem;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .animated-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #0f172a, #1e293b, #334155);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            opacity: 0.95;
        }

        .stock-ticker {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .stock-item {
            position: absolute;
            color: rgba(255, 255, 255, 0.7);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: nowrap;
            animation: floatStock 20s linear infinite;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        @keyframes floatStock {
            0% {
                transform: translateY(100vh);
            }
            100% {
                transform: translateY(-100px);
            }
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .hero-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            z-index: 1;
        }

        /* Avatar 3D con iniciales JTR */
        .avatar-3d {
            width: 200px;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            margin-bottom: 2rem;
            animation: rotate3d 15s infinite linear;
        }

        @keyframes rotate3d {
            0% { transform: rotateY(0deg) rotateX(5deg); }
            100% { transform: rotateY(360deg) rotateX(5deg); }
        }

        .avatar-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            backface-visibility: hidden;
            font-size: 5rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 4px solid rgba(255, 255, 255, 0.3);
        }

        .avatar-face.front {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        }

        .avatar-face.back {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            transform: rotateY(180deg);
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .hero-content p {
            font-size: 1.5rem;
            max-width: 700px;
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 2rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background: white;
            color: var(--primary-color);
        }

        /* Secciones generales */
        .section-title {
            font-size: 2.5rem;
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        /* Sobre Mí mejorado */
        .about-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3rem;
            align-items: center;
        }

        .about-text {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .about-text p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .about-highlights {
            margin-top: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .highlight-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 1rem;
            padding: 1.5rem;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .highlight-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .highlight-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .highlight-item h4 {
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .highlight-item p {
            margin-bottom: 0;
            font-size: 0.95rem;
            opacity: 0.8;
        }

        /* Nueva Sección de Proyectos Destacados (reemplaza Competencias) */
        .projects-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .project-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            padding: 1.5rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .project-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            text-align: center;
        }

        .project-title {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .project-desc {
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 1rem;
            flex-grow: 1;
        }

        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: auto;
        }

        .tech-tag {
            background: rgba(37, 99, 235, 0.2);
            color: var(--secondary-color);
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        /* Timeline */
        .timeline {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
            border-radius: 10px;
        }

        .timeline-item {
            padding: 10px 40px;
            position: relative;
            width: 50%;
        }

        .timeline-item:nth-child(even) {
            left: 50%;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
        }

        .timeline-content {
            padding: 20px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .timeline-date {
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 10px;
            display: block;
        }

        .timeline-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .timeline-desc {
            color: var(--text-color);
            opacity: 0.8;
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--secondary-color);
            border: 4px solid var(--primary-color);
            border-radius: 50%;
            top: 20px;
            z-index: 1;
        }

        .timeline-item:nth-child(odd)::after {
            right: -10px;
        }

        .timeline-item:nth-child(even)::after {
            left: -10px;
        }

        /* Sección de Reconocimientos */
        .awards-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .award-item {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .award-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .award-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .award-issuer {
            font-weight: 500;
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
        }

        .award-date {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .award-desc {
            color: var(--text-color);
            opacity: 0.8;
            font-size: 0.95rem;
        }

        /* Sección de Certificaciones */
        .certs-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .cert-item {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            padding: 1.5rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .cert-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .cert-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .cert-issuer {
            font-weight: 500;
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
        }

        .cert-date {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .cert-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .skill-tag {
            background: rgba(37, 99, 235, 0.2);
            color: var(--secondary-color);
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        /* Simulador de Risk Modeling - Mejorado y colapsable */
        .simulator-container {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 2rem auto;
            max-width: 800px;
            transition: all 0.3s ease;
        }

        .simulator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            margin-bottom: 1rem;
        }

        .simulator-header h3 {
            margin: 0;
            color: var(--text-color);
        }

        .simulator-toggle {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .simulator-toggle.rotated {
            transform: rotate(180deg);
        }

        .simulator-content {
            overflow: hidden;
            transition: max-height 0.5s ease;
            max-height: 0;
        }

        .simulator-content.expanded {
            max-height: 1000px;
        }

        .simulator-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        .control-group label {
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .control-group input {
            padding: 0.8rem;
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
        }

        .simulator-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .result-card {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .result-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Panel de Mercados Financieros - Mejorado con animación */
        .market-panel {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 2rem 0;
        }

        .market-content {
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .market-card {
            background: var(--bg-color);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateY(20px);
        }

        .market-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .market-symbol {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .market-name {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .market-price {
            font-size: 2rem;
            font-weight: 700;
            margin: 0.5rem 0;
            transition: color 0.5s ease;
        }

        .price-up {
            color: #22c55e;
        }

        .price-down {
            color: #ef4444;
        }

        .market-change {
            display: inline-block;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .change-positive {
            background: rgba(34, 197, 94, 0.2);
            color: rgb(21, 128, 61);
        }

        .change-negative {
            background: rgba(239, 68, 68, 0.2);
            color: rgb(185, 28, 28);
        }

        /* Sección de Integración con APIs */
        .api-section {
            margin-top: 4rem;
        }

        .api-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .api-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            padding: 1.5rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            text-align: center;
        }

        .api-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .api-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .api-content {
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .api-loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 120px;
        }

        .api-loader .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(37, 99, 235, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Sección Contacto - iPhone */
        .iphone-container {
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        .iphone {
            width: 320px;
            height: 660px;
            background: var(--dark-color);
            border-radius: 40px;
            padding: 15px;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5),
                        0 0 0 4px #4b5563,
                        0 0 0 6px #1f2937,
                        0 0 0 8px #4b5563;
            transform-style: preserve-3d;
            transform: rotateY(0deg);
            transition: transform 1s ease;
        }

        .iphone-screen {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 30px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .dynamic-island {
            width: 120px;
            height: 35px;
            background: #020617;
            border-radius: 20px;
            margin: 10px auto;
            position: relative;
            z-index: 10;
        }

        .notifications-container {
            position: relative;
            height: 500px;
            overflow-y: auto;
            padding: 10px;
        }

        .notification {
            width: calc(100% - 20px);
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 14px;
            padding: 15px;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--glass-border);
            opacity: 0;
            transform: translateY(20px);
            position: absolute;
        }

        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        .notification.hiding {
            opacity: 0;
            transform: translateY(-20px);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2rem;
            color: white;
        }

        .linkedin { background: #0A66C2; }
        .email { background: #EA4335; }
        .call { background: #34A853; }
        .whatsapp { background: #25D366; }
        .job-offer { background: #7e22ce; }

        .notification-content {
            flex-grow: 1;
        }

        .notification-app {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 3px;
        }

        .notification-text {
            font-size: 0.85rem;
            color: #cbd5e1;
        }

        .notification-time {
            font-size: 0.7rem;
            color: #94a3b8;
            margin-top: 3px;
        }

        .iphone-footer {
            padding: 15px;
            text-align: center;
            color: #94a3b8;
            font-size: 0.8rem;
        }

        /* Footer */
        footer {
            background: var(--dark-color);
            padding: 2rem;
            text-align: center;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .social-links a {
            color: var(--light-color);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: var(--secondary-color);
            transform: translateY(-3px);
        }

        /* Firma de desarrollo */
        .dev-signature {
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
            position: relative;
        }

        .dev-signature p {
            font-size: 1.1rem;
            color: var(--text-color);
            position: relative;
            display: inline-block;
            padding: 0 1rem;
        }

        .dev-signature p::before,
        .dev-signature p::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 50px;
            height: 2px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        }

        .dev-signature p::before {
            right: 100%;
        }

        .dev-signature p::after {
            left: 100%;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .hero-content h1 {
                font-size: 3rem;
            }
            
            .hero-content p {
                font-size: 1.3rem;
            }
        }

        @media (max-width: 768px) {
            .timeline::after {
                left: 31px;
            }

            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }

            .timeline-item:nth-child(even) {
                left: 0;
            }

            .timeline-item:nth-child(odd)::after,
            .timeline-item:nth-child(even)::after {
                left: 21px;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .hero-content p {
                font-size: 1.2rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 70%;
                height: 100vh;
                background: var(--card-bg);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                flex-direction: column;
                justify-content: center;
                align-items: center;
                transition: right 0.3s ease;
                z-index: 1000;
                box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            }

            .nav-links.active {
                right: 0;
            }

            .nav-links li {
                margin: 1.5rem 0;
            }

            .hamburger {
                display: flex;
            }

            .header-controls {
                gap: 10px;
            }

            .download-cv span {
                display: none;
            }

            .download-cv {
                padding: 8px 12px;
            }

            .avatar-3d {
                width: 150px;
                height: 150px;
            }
            
            .avatar-face {
                font-size: 3.5rem;
            }

            .simulator-controls {
                grid-template-columns: 1fr;
            }

            .about-highlights {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            section {
                padding: 4rem 1rem;
            }
            
            .hero-content h1 {
                font-size: 2rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                text-align: center;
            }
            
            .avatar-3d {
                width: 120px;
                height: 120px;
            }
            
            .avatar-face {
                font-size: 2.5rem;
            }

            .dev-signature p::before,
            .dev-signature p::after {
                width: 30px;
            }
        }
    </style>
</head>
<body>
    <!-- Header y Navegación -->
    <header>
        <nav>
            <a href="#" class="logo">J<span>TR</span></a>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links">
                <li><a href="#hero">Inicio</a></li>
                <li><a href="#about">Sobre Mí</a></li>
                <li><a href="#timeline">Trayectoria</a></li>
                <li><a href="#projects">Proyectos</a></li>
                <li><a href="#awards">Reconocimientos</a></li>
                <li><a href="#certifications">Certificaciones</a></li>
                <li><a href="#contact">Contacto</a></li>
            </ul>
            <div class="header-controls">
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="language-selector">
                    <button class="language-btn">
                        <i class="fas fa-globe"></i> ES
                    </button>
                    <div class="language-dropdown" id="language-dropdown">
                        <div class="language-option" data-lang="es">Español</div>
                        <div class="language-option" data-lang="en">English</div>
                    </div>
                </div>
                <a href="Javier_Torres_Rubio_CV_ES.pdf" class="download-cv" download>
                    <i class="fas fa-download"></i>
                    <span>CV</span>
                </a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="hero">
        <div class="hero-bg">
            <div class="animated-bg"></div>
            <div class="stock-ticker" id="stock-ticker"></div>
        </div>
        <div class="container hero-content">
            <div class="avatar-3d" data-aos="zoom-in">
                <div class="avatar-face front">JTR</div>
                <div class="avatar-face back">JTR</div>
            </div>
            <h1 data-aos="fade-up" data-aos-delay="200">Javier Torres Rubio</h1>
            <p data-aos="fade-up" data-aos-delay="300">Analista de Riesgos Cuantitativos &amp; Desarrollador de Modelos Financieros</p>
            <div class="hero-buttons" data-aos="fade-up" data-aos-delay="400">
                <a href="#contact" class="btn">Contactar</a>
                <a href="Javier_Torres_Rubio_CV_ES.pdf" class="btn btn-outline" download>
                    <i class="fas fa-download"></i> Descargar CV
                </a>
            </div>
        </div>
    </section>

    <!-- Sobre Mí Mejorado -->
    <section id="about">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">Sobre Mí</h2>
            <div class="about-container">
                <div class="about-text" data-aos="fade-up">
                    <p>Estudiante del máster en Ciencias Actuariales y Financieras de la Universidad Carlos III de Madrid. Apasionado por el sector actuarial, las finanzas cuantitativas y el análisis de riesgos. Con experiencia en Banca Corporativa en BNP Paribas CIB</p>
                    <p>Mi perfil técnico combina formación estadística/matemática (Máster en Ciencias Actuariales) y económica (Grado en Economía Financiera y Actuarial).</p>                 
                    <div class="about-highlights">
                        <div class="highlight-item" data-aos="fade-up" data-aos-delay="200">
                            <div class="highlight-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h4>Especialización en Risk Modeling</h4>
                            <p>Desarrollo de modelos cuantitativos avanzados</p>
                        </div>
                        <div class="highlight-item" data-aos="fade-up" data-aos-delay="300">
                            <div class="highlight-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <h4>Automatización de Procesos</h4>
                            <p>Optimización con R, VBA y Python</p>
                        </div>
                        <div class="highlight-item" data-aos="fade-up" data-aos-delay="400">
                            <div class="highlight-icon">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <h4>Excelencia Académica</h4>
                            <p>6 Matrículas de Honor</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Timeline -->
    <section id="timeline">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">Mi Trayectoria</h2>
            <div class="timeline">
                <div class="timeline-item" data-aos="fade-right">
                    <div class="timeline-content">
                        <span class="timeline-date">2024 - 2026 (Previsto)</span>
                        <h3 class="timeline-title">Máster en Ciencias Actuariales y Financieras</h3>
                        <p class="timeline-desc">Universidad Carlos III de Madrid. Formación avanzada en valoración de derivados, técnicas estadísticas y procesos estocásticos.</p>
                    </div>
                </div>
                <div class="timeline-item" data-aos="fade-left">
                    <div class="timeline-content">
                        <span class="timeline-date">Mar 2024 – Ago 2024</span>
                        <h3 class="timeline-title">Analista - BNP Paribas CIB</h3>
                        <p class="timeline-desc">Gestión de operaciones bursátiles, compliance, verificación de pagos de dividendos y monitoreo del índice Euribor.</p>
                    </div>
                </div>
                <div class="timeline-item" data-aos="fade-right">
                    <div class="timeline-content">
                        <span class="timeline-date">2020 – 2024</span>
                        <h3 class="timeline-title">Grado en Economía Financiera y Actuarial</h3>
                        <p class="timeline-desc">Universidad Rey Juan Carlos. Delegado. Nota media: 8.3/10. 13 asignaturas calificadas con Sobresaliente.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Proyectos Destacados (reemplaza Competencias) -->
    <section id="projects">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">Proyectos Destacados</h2>
            <div class="projects-container">
                <div class="project-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="project-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3 class="project-title">Desarrollo Cartera de Inversión</h3>
                    <p class="project-desc"> Creación de una app de Shiny en R, en la que se puede ver la predicción 3 steps-ahead de los movimientos búrsatiles de los activos que conforman la cartera, además de distintas métricas. Todo ello sincronizado en tiempo real mediante web-scrapping</p>
                    <div class="project-tech">
                        <span class="tech-tag">R</span>
                        <span class="tech-tag">Shiny</span>
                        <span class="tech-tag">Web Scrapping</span>
                    </div>
                </div>
                <div class="project-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="project-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h3 class="project-title">Modelo Interno Parcial Aseguradora</h3>
                    <p class="project-desc"> Creación de un modelo actuarial para una cartera de asegurados, obteniendo métricas como el Best-Estimate, el capital económico, el VaR y el T-VaR, de cada uno de los riesgos y del modelo completo</p>
                    <div class="project-tech">
                        <span class="tech-tag">R</span>
                        <span class="tech-tag">Stress Testing</span>
                        <span class="tech-tag">VaR</span>
                    </div>
                </div>
                <div class="project-card" data-aos="fade-up" data-aos-delay="400">
                    <div class="project-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3 class="project-title">Trabajo fin de Máster</h3>
                    <p class="project-desc">Sistema automatizado para generar reportes financieros diarios, reduciendo el tiempo de producción en un 85%.</p>
                    <div class="project-tech">
                        <span class="tech-tag">VBA</span>
                        <span class="tech-tag">SAS</span>
                        <span class="tech-tag">Macros</span>
                    </div>
                </div>
            </div>

            <!-- Simulador de Risk Modeling - Mejorado y colapsable -->
            <div class="simulator-container" data-aos="fade-up" data-aos-delay="500">
                <div class="simulator-header" id="simulator-toggle">
                    <h3>Simulador de Risk Modeling</h3>
                    <button class="simulator-toggle">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                <div class="simulator-content" id="simulator-content">
                    <div class="simulator-controls">
                        <div class="control-group">
                            <label for="initialInvestment">Inversión Inicial (€)</label>
                            <input type="number" id="initialInvestment" value="10000" min="1000" step="1000">
                        </div>
                        <div class="control-group">
                            <label for="volatility">Volatilidad (%)</label>
                            <input type="number" id="volatility" value="15" min="5" max="50" step="1">
                        </div>
                        <div class="control-group">
                            <label for="timeHorizon">Horizonte Temporal (días)</label>
                            <input type="number" id="timeHorizon" value="10" min="1" max="365" step="1">
                        </div>
                        <div class="control-group">
                            <label for="confidenceLevel">Nivel de Confianza (%)</label>
                            <input type="number" id="confidenceLevel" value="95" min="90" max="99" step="1">
                        </div>
                    </div>
                    <div class="simulator-results">
                        <div class="result-card">
                            <div class="result-label">Value at Risk (VaR)</div>
                            <div class="result-value" id="varResult">€ 0</div>
                            <div class="result-label">Pérdida máxima esperada</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Expected Shortfall</div>
                            <div class="result-value" id="esResult">€ 0</div>
                            <div class="result-label">Pérdida media en el peor %</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Stress Testing</div>
                            <div class="result-value" id="stressResult">€ 0</div>
                            <div class="result-label">Escenario adverso</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reconocimientos -->
    <section id="awards">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">Reconocimientos y Premios</h2>
            <div class="awards-container">
                <div class="award-item" data-aos="fade-up" data-aos-delay="200">
                    <h3 class="award-title">Matrícula de Honor en Contabilidad de Entidades de Seguros</h3>
                    <div class="award-issuer">Universidad Carlos III de Madrid</div>
                    <div class="award-date">Enero 2025</div>
                    <p class="award-desc">Expedida por UC3M</p>
                </div>
                <div class="award-item" data-aos="fade-up" data-aos-delay="300">
                    <h3 class="award-title">Matrícula de Honor en Prácticas Externas</h3>
                    <div class="award-issuer">Universidad Rey Juan Carlos</div>
                    <div class="award-date">Junio 2024</div>
                    <p class="award-desc">Expedida por URJC</p>
                </div>
                <div class="award-item" data-aos="fade-up" data-aos-delay="400">
                    <h3 class="award-title">Matrícula de Honor en Dirección de Ventas</h3>
                    <div class="award-issuer">Universidad Rey Juan Carlos</div>
                    <div class="award-date">Mayo 2023</div>
                    <p class="award-desc">Expedida por URJC</p>
                </div>
                <div class="award-item" data-aos="fade-up" data-aos-delay="500">
                    <h3 class="award-title">Matrícula de Honor en Finanzas Corporativas</h3>
                    <div class="award-issuer">Universidad Rey Juan Carlos</div>
                    <div class="award-date">Mayo 2023</div>
                    <p class="award-desc">Expedida por URJC</p>
                </div>
                <div class="award-item" data-aos="fade-up" data-aos-delay="600">
                    <h3 class="award-title">Matrícula de Honor en Introducción a la Estadística</h3>
                    <div class="award-issuer">Universidad Rey Juan Carlos</div>
                    <div class="award-date">Enero 2022</div>
                    <p class="award-desc">Expedida por URJC</p>
                </div>
                <div class="award-item" data-aos="fade-up" data-aos-delay="700">
                    <h3 class="award-title">Matrícula de Honor en Introducción al Derecho</h3>
                    <div class="award-issuer">Universidad Rey Juan Carlos</div>
                    <div class="award-date">Enero 2021</div>
                    <p class="award-desc">Expedida por URJC</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Certificaciones -->
    <section id="certifications">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">Licencias y Certificaciones</h2>
            <div class="certs-container">
                <div class="cert-item" data-aos="fade-up" data-aos-delay="200">
                    <h3 class="cert-title">Global Private Bank Job Simulation</h3>
                    <div class="cert-issuer">JPMorgan Chase</div>
                    <div class="cert-date">Noviembre 2023</div>
                    <div class="cert-skills">
                        <span class="skill-tag">Problem Solving</span>
                        <span class="skill-tag">Technical Skills</span>
                        <span class="skill-tag">Communication</span>
                        <span class="skill-tag">Presentation</span>
                        <span class="skill-tag">Networking</span>
                        <span class="skill-tag">Relationship Skills</span>
                    </div>
                </div>
                <div class="cert-item" data-aos="fade-up" data-aos-delay="300">
                    <h3 class="cert-title">FCE B2 First</h3>
                    <div class="cert-issuer">Cambridge University Press & Assessment</div>
                    <div class="cert-date">Septiembre 2023</div>
                    <div class="cert-skills">
                        <span class="skill-tag">English</span>
                    </div>
                </div>
                <div class="cert-item" data-aos="fade-up" data-aos-delay="400">
                    <h3 class="cert-title">SAS Programming 1: Essentials</h3>
                    <div class="cert-issuer">SAS</div>
                    <div class="cert-date">Julio 2023</div>
                    <div class="cert-skills">
                        <span class="skill-tag">SAS Base</span>
                    </div>
                </div>
                <div class="cert-item" data-aos="fade-up" data-aos-delay="500">
                    <h3 class="cert-title">SAS Programming for R Users</h3>
                    <div class="cert-issuer">SAS</div>
                    <div class="cert-date">Junio 2023</div>
                </div>
                <div class="cert-item" data-aos="fade-up" data-aos-delay="600">
                    <h3 class="cert-title">Data Literacy Essentials</h3>
                    <div class="cert-issuer">SAS</div>
                    <div class="cert-date">Mayo 2023</div>
                    <div class="cert-skills">
                        <span class="skill-tag">Alfabetización</span>
                    </div>
                </div>
                <div class="cert-item" data-aos="fade-up" data-aos-delay="700">
                    <h3 class="cert-title">Comercio Electrónico</h3>
                    <div class="cert-issuer">Google Activate</div>
                    <div class="cert-date">Julio 2022</div>
                </div>
                <div class="cert-item" data-aos="fade-up" data-aos-delay="800">
                    <h3 class="cert-title">Fundamentos Marketing Digital</h3>
                    <div class="cert-issuer">Google Activate</div>
                    <div class="cert-date">Junio 2022</div>
                </div>
            </div>

            <!-- Panel de Mercados Financieros - Mejorado con animación -->
            <div class="market-panel" data-aos="fade-up" data-aos-delay="900">
                <h3 class="section-title">Mercado de Acciones en Tiempo Real</h3>
                <div class="market-content">
                    <div class="market-card" id="stock-card">
                        <div class="api-loader">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto - iPhone -->
    <section id="contact">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">Contacto</h2>
            <div class="iphone-container">
                <div class="iphone" data-aos="flip-left" data-aos-delay="300">
                    <div class="iphone-screen">
                        <div class="dynamic-island"></div>
                        <div class="notifications-container" id="notifications-container">
                            <!-- Las notificaciones se generarán dinámicamente con JavaScript -->
                        </div>
                        <div class="iphone-footer">
                            Desliza para más opciones de contacto
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Actividad Reciente (movida después de Contacto) -->
    <section id="recent-activity">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up">Actividad Reciente</h2>
            <div class="api-cards">
                <div class="api-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="api-icon">
                        <i class="fab fa-github"></i>
                    </div>
                    <div class="api-content" id="github-content">
                        <div class="api-loader">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                <div class="api-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="api-icon">
                        <i class="fab fa-linkedin"></i>
                    </div>
                    <div class="api-content" id="linkedin-content">
                        <div class="api-loader">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="social-links">
                <a href="https://linkedin.com/in/javier-torres-rubio" target="_blank"><i class="fab fa-linkedin"></i></a>
                <a href="mailto:javiertorresrubio9@gmail.com"><i class="fas fa-envelope"></i></a>
                <a href="tel:+34654609650"><i class="fas fa-phone"></i></a>
                <a href="https://wa.me/34654609650" target="_blank"><i class="fab fa-whatsapp"></i></a>
            </div>
            <p>&copy; 2025 JTR. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Firma de desarrollo -->
    <div class="dev-signature">
        <p>Website entirely developed by Javier Torres Rubio</p>
    </div>

    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Inicializar AOS
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });

        // Efecto de scroll para el header
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Menú Hamburguesa
        const hamburger = document.querySelector('.hamburger');
        const navLinks = document.querySelector('.nav-links');
        
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        // Cerrar menú al hacer clic en un enlace
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });

        // Toggle de tema claro/oscuro
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');
        
        // Comprobar si hay una preferencia guardada
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.documentElement.setAttribute('data-theme', savedTheme);
            if (savedTheme === 'dark') {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
        }
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            if (currentTheme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            }
        });

        // Selector de idioma
        const languageBtn = document.querySelector('.language-btn');
        const languageDropdown = document.getElementById('language-dropdown');
        const downloadCvBtn = document.querySelector('.download-cv');
        const downloadCvBtnLarge = document.querySelector('.hero-buttons .btn-outline');
        
        languageBtn.addEventListener('click', () => {
            languageDropdown.classList.toggle('show');
        });
        
        document.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', () => {
                const lang = option.getAttribute('data-lang');
                languageDropdown.classList.remove('show');
                
                // Cambiar el texto del botón
                languageBtn.innerHTML = `<i class="fas fa-globe"></i> ${lang.toUpperCase()}`;
                
                // Cambiar el CV para descargar según el idioma
                if (lang === 'en') {
                    downloadCvBtn.href = 'Javier_Torres_Rubio_CV_ENG.pdf';
                    if (downloadCvBtnLarge) {
                        downloadCvBtnLarge.href = 'Javier_Torres_Rubio_CV_ENG.pdf';
                    }
                } else {
                    downloadCvBtn.href = 'Javier_Torres_Rubio_CV_ES.pdf';
                    if (downloadCvBtnLarge) {
                        downloadCvBtnLarge.href = 'Javier_Torres_Rubio_CV_ES.pdf';
                    }
                }
            });
        });
        
        // Cerrar dropdown al hacer clic fuera
        document.addEventListener('click', (e) => {
            if (!languageBtn.contains(e.target) && !languageDropdown.contains(e.target)) {
                languageDropdown.classList.remove('show');
            }
        });

        // Efecto de rotación 3D para el iPhone
        const iphone = document.querySelector('.iphone');
        if (iphone) {
            document.addEventListener('mousemove', (e) => {
                const x = (window.innerWidth / 2 - e.clientX) / 25;
                const y = (window.innerHeight / 2 - e.clientY) / 25;
                iphone.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
            });
        }

        // Sistema de notificaciones para el iPhone (siempre 3 visibles)
        const notifications = [
            {
                app: 'LinkedIn',
                text: 'Nueva oportunidad laboral en análisis de riesgos',
                time: 'Ahora',
                type: 'linkedin',
                action: () => window.open('https://linkedin.com/in/javier-torres-rubio', '_blank')
            },
            {
                app: 'Email',
                text: 'Consulta sobre tu perfil profesional',
                time: 'Hace 5 min',
                type: 'email',
                action: () => location.href='mailto:javiertorresrubio9@gmail.com'
            },
            {
                app: 'Llamada',
                text: 'Reclutador - BNP Paribas',
                time: 'Hace 20 min',
                type: 'call',
                action: () => location.href='tel:+34654609650'
            },
            {
                app: 'WhatsApp',
                text: 'Hola Javier, me interesa tu perfil...',
                time: 'Ayer',
                type: 'whatsapp',
                action: () => window.open('https://wa.me/34654609650', '_blank')
            },
            {
                app: 'Oferta de Trabajo',
                text: 'Analista de Riesgos Cuantitativos - Santander',
                time: 'Ayer',
                type: 'job-offer',
                action: () => window.open('https://linkedin.com/in/javier-torres-rubio', '_blank')
            },
            {
                app: 'LinkedIn',
                text: '+5 nuevas conexiones esta semana',
                time: 'Hace 2 días',
                type: 'linkedin',
                action: () => window.open('https://linkedin.com/in/javier-torres-rubio', '_blank')
            },
            {
                app: 'Email',
                text: 'Invitación a evento de finanzas cuantitativas',
                time: 'Hace 3 días',
                type: 'email',
                action: () => location.href='mailto:javiertorresrubio9@gmail.com'
            }
        ];

        const notificationsContainer = document.getElementById('notifications-container');
        let activeNotifications = [];
        let notificationCounter = 0;

        function showNotification() {
            // Si ya hay 3 notificaciones, eliminar la más antigua
            if (activeNotifications.length >= 3) {
                const oldestNotification = activeNotifications.shift();
                oldestNotification.classList.add('hiding');
                setTimeout(() => {
                    notificationsContainer.removeChild(oldestNotification);
                }, 300);
            }

            // Crear nueva notificación
            const notificationData = notifications[notificationCounter % notifications.length];
            const notificationEl = document.createElement('div');
            notificationEl.className = 'notification';
            notificationEl.style.top = `${activeNotifications.length * 110 + 10}px`;
            notificationEl.innerHTML = `
                <div class="notification-icon ${notificationData.type}">
                    <i class="fab fa-${notificationData.type === 'call' ? 'phone' : notificationData.type}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-app">${notificationData.app}</div>
                    <div class="notification-text">${notificationData.text}</div>
                    <div class="notification-time">${notificationData.time}</div>
                </div>
            `;
            
            notificationEl.addEventListener('click', notificationData.action);
            notificationsContainer.appendChild(notificationEl);
            
            // Animar la entrada
            setTimeout(() => {
                notificationEl.classList.add('show');
            }, 50);

            // Añadir a la lista de notificaciones activas
            activeNotifications.push(notificationEl);

            // Avanzar al siguiente índice
            notificationCounter++;

            // Programar siguiente notificación
            setTimeout(showNotification, 3000);
        }

        // Iniciar el ciclo de notificaciones
        setTimeout(showNotification, 1000);

        // Fondo animado de ticker de bolsa con mejoras
        function createStockTicker() {
            const stockTicker = document.getElementById('stock-ticker');
            const stocks = [
                { symbol: 'AAPL', price: 178.72, change: 1.24 },
                { symbol: 'MSFT', price: 407.81, change: 2.36 },
                { symbol: 'GOOGL', price: 176.52, change: -0.45 },
                { symbol: 'AMZN', price: 179.61, change: 0.87 },
                { symbol: 'TSLA', price: 251.52, change: -1.23 },
                { symbol: 'NVDA', price: 126.57, change: 3.42 },
                { symbol: 'JPM', price: 198.21, change: 0.67 },
                { symbol: 'V', price: 274.89, change: -0.32 }
            ];

            // Crear múltiples elementos de acciones que flotarán
            for (let i = 0; i < 20; i++) {
                const stock = stocks[Math.floor(Math.random() * stocks.length)];
                const stockItem = document.createElement('div');
                stockItem.className = 'stock-item';
                
                const changeClass = stock.change >= 0 ? 'change-positive' : 'change-negative';
                const changeSign = stock.change >= 0 ? '+' : '';
                
                stockItem.innerHTML = `${stock.symbol} $${stock.price.toFixed(2)} <span class="${changeClass}">${changeSign}${stock.change}%</span>`;
                
                // Posición aleatoria
                stockItem.style.left = `${Math.random() * 90}%`;
                stockItem.style.animationDelay = `${Math.random() * 15}s`;
                stockItem.style.animationDuration = `${15 + Math.random() * 10}s`;
                
                stockTicker.appendChild(stockItem);
                
                // Hacer que aparezcan gradualmente
                setTimeout(() => {
                    stockItem.style.opacity = '1';
                }, 100 + i * 200);
            }
        }

        // Simulador de Risk Modeling colapsable
        function setupRiskSimulator() {
            const simulatorToggle = document.getElementById('simulator-toggle');
            const simulatorContent = document.getElementById('simulator-content');
            const toggleIcon = simulatorToggle.querySelector('.simulator-toggle i');
            
            simulatorToggle.addEventListener('click', () => {
                simulatorContent.classList.toggle('expanded');
                toggleIcon.classList.toggle('fa-chevron-down');
                toggleIcon.classList.toggle('fa-chevron-up');
                simulatorToggle.querySelector('.simulator-toggle').classList.toggle('rotated');
                
                // Si se expande, calcular métricas
                if (simulatorContent.classList.contains('expanded')) {
                    calculateRiskMetrics();
                }
            });
            
            const inputs = document.querySelectorAll('.simulator-controls input');
            inputs.forEach(input => {
                input.addEventListener('input', calculateRiskMetrics);
            });
            
            // Calcular métricas iniciales si está expandido
            if (simulatorContent.classList.contains('expanded')) {
                calculateRiskMetrics();
            }
        }
        
        function calculateRiskMetrics() {
            const initialInvestment = parseFloat(document.getElementById('initialInvestment').value);
            const volatility = parseFloat(document.getElementById('volatility').value) / 100;
            const timeHorizon = parseFloat(document.getElementById('timeHorizon').value);
            const confidenceLevel = parseFloat(document.getElementById('confidenceLevel').value) / 100;
            
            // Cálculo simplificado de métricas de riesgo
            const zScore = Math.sqrt(-2 * Math.log(1 - confidenceLevel)); // Aproximación
            
            const varValue = initialInvestment * volatility * Math.sqrt(timeHorizon/252) * zScore;
            const esValue = initialInvestment * volatility * Math.sqrt(timeHorizon/252) * (zScore + (Math.exp(-zScore*zScore/2))/(Math.sqrt(2*Math.PI)*(1-confidenceLevel)));
            const stressValue = initialInvestment * volatility * 2.5; // Escenario de estrés (250% de la volatilidad)
            
            document.getElementById('varResult').textContent = `€ ${varValue.toFixed(2)}`;
            document.getElementById('esResult').textContent = `€ ${esValue.toFixed(2)}`;
            document.getElementById('stressResult').textContent = `€ ${stressValue.toFixed(2)}`;
        }

        // Panel de Mercados Financieros - Mejorado con animación
        let currentStockIndex = 0;
        const stocksData = [
            { symbol: 'AAPL', name: 'Apple Inc.', price: 178.72, change: 1.24 },
            { symbol: 'MSFT', name: 'Microsoft Corp.', price: 407.81, change: 2.36 },
            { symbol: 'GOOGL', name: 'Alphabet Inc.', price: 176.52, change: -0.45 },
            { symbol: 'AMZN', name: 'Amazon.com Inc.', price: 179.61, change: 0.87 },
            { symbol: 'TSLA', name: 'Tesla Inc.', price: 251.52, change: -1.23 },
            { symbol: 'NVDA', name: 'NVIDIA Corp.', price: 126.57, change: 3.42 }
        ];

        let previousPrice = 0;

        function showStockData() {
            const stockCard = document.getElementById('stock-card');
            const stock = stocksData[currentStockIndex];
            
            const changeClass = stock.change >= 0 ? 'change-positive' : 'change-negative';
            const changeSign = stock.change >= 0 ? '+' : '';
            const priceClass = stock.price > previousPrice ? 'price-up' : (stock.price < previousPrice ? 'price-down' : '');
            
            stockCard.innerHTML = `
                <div class="market-symbol">${stock.symbol}</div>
                <div class="market-name">${stock.name}</div>
                <div class="market-price ${priceClass}">$${stock.price.toFixed(2)}</div>
                <div class="market-change ${changeClass}">${changeSign}${stock.change}%</div>
            `;
            
            // Guardar el precio actual para la próxima comparación
            previousPrice = stock.price;
            
            // Animar la entrada
            setTimeout(() => {
                stockCard.classList.add('visible');
            }, 50);
            
            // Avanzar al siguiente índice
            currentStockIndex = (currentStockIndex + 1) % stocksData.length;
            
            // Programar siguiente actualización
            setTimeout(() => {
                stockCard.classList.remove('visible');
                setTimeout(showStockData, 500);
            }, 4500);
        }

        // Integración con APIs
        // GitHub API
        fetch('https://api.github.com/users/Javi7899/repos?sort=updated&per_page=3')
            .then(response => response.json())
            .then(data => {
                const githubContent = document.getElementById('github-content');
                githubContent.innerHTML = '';
                
                if (data.length > 0) {
                    data.forEach(repo => {
                        const repoElement = document.createElement('div');
                        repoElement.style.marginBottom = '10px';
                        repoElement.innerHTML = `
                            <div style="font-weight: 500;">${repo.name}</div>
                            <div style="font-size: 0.8rem; opacity: 0.8;">${repo.description || 'Sin descripción'}</div>
                            <div style="font-size: 0.7rem; margin-top: 5px;">
                                <span><i class="fas fa-star"></i> ${repo.stargazers_count}</span>
                                <span style="margin-left: 10px;"><i class="fas fa-code-branch"></i> ${repo.forks_count}</span>
                            </div>
                        `;
                        githubContent.appendChild(repoElement);
                    });
                    
                    const linkElement = document.createElement('a');
                    linkElement.href = 'https://github.com/Javi7899';
                    linkElement.target = '_blank';
                    linkElement.style.display = 'block';
                    linkElement.style.marginTop = '10px';
                    linkElement.style.fontSize = '0.8rem';
                    linkElement.style.color = 'var(--primary-color)';
                    linkElement.innerHTML = 'Ver más en GitHub <i class="fas fa-arrow-right"></i>';
                    githubContent.appendChild(linkElement);
                } else {
                    githubContent.innerHTML = '<div>No se encontraron repositorios</div>';
                }
            })
            .catch(error => {
                document.getElementById('github-content').innerHTML = '<div>Error al cargar datos de GitHub</div>';
            });

        // LinkedIn (simulación ya que la API de LinkedIn es más restrictiva)
        const linkedinContent = document.getElementById('linkedin-content');
        linkedinContent.innerHTML = `
            <div style="text-align: center;">
                <div style="font-weight: 500; margin-bottom: 10px;">Perfil de LinkedIn</div>
                <div style="font-size: 0.9rem; margin-bottom: 15px;">Conecta conmigo en LinkedIn para ver mis recomendaciones y experiencia</div>
                <a href="https://www.linkedin.com/in/javier-torres-rubio" target="_blank" style="display: inline-block; background: var(--primary-color); color: white; padding: 8px 15px; border-radius: 5px; text-decoration: none; font-size: 0.8rem;">
                    Ver Perfil
                </a>
            </div>
        `;

        // Inicializar componentes cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', () => {
            createStockTicker();
            setupRiskSimulator();
            showStockData();
        });
    </script>
</body>
</html>
